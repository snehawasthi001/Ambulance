"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./lib/geminiService.ts":
/*!******************************!*\
  !*** ./lib/geminiService.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GeminiService: function() { return /* binding */ GeminiService; },\n/* harmony export */   geminiService: function() { return /* binding */ geminiService; }\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(app-pages-browser)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\nconst genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(\"AIzaSyDqVHQN7Jn9pYLlYvJxYnxJxYnxJxYnxJx\" || 0);\nclass GeminiService {\n    /**\r\n     * Analyze symptoms from voice transcript and extract medical information\r\n     */ async analyzeSymptoms(transcript) {\n        try {\n            const prompt = \"You are a medical AI assistant. Analyze the following patient symptoms and determine if this is a valid medical emergency or health-related query.\\n\\nPatient's description: \\\"\".concat(transcript, '\"\\n\\nProvide your analysis in the following JSON format:\\n{\\n  \"isMedicalEmergency\": true/false,\\n  \"validationError\": \"Reason if not a medical emergency (e.g., \\'Input is unrelated to health\\', \\'Gibberish input\\')\",\\n  \"symptoms\": [\"list of identified symptoms\"],\\n  \"severity\": \"Critical|High|Moderate|Low\",\\n  \"urgency\": 1-10 (number),\\n  \"requiredSpecializations\": [\"list from: General, Cardiac, Trauma, Pediatric, Neurology, Orthopedic, Eye, Dental, Maternity, Oncology, Emergency\"],\\n  \"needsBlood\": true/false,\\n  \"bloodType\": \"A+|A-|B+|B-|AB+|AB-|O+|O-\" (if known, otherwise null),\\n  \"estimatedCondition\": \"brief description of possible condition\"\\n}\\n\\nImportant:\\n1. If the input is NOT related to health, medicine, or emergencies (e.g., \"I want pizza\", \"Hello world\", random gibberish), set \"isMedicalEmergency\" to false and provide a \"validationError\".\\n2. If it IS related, set \"isMedicalEmergency\" to true and fill the rest.\\n3. Return ONLY the JSON object, no additional text.');\n            const result = await this.model.generateContent(prompt);\n            const response = await result.response;\n            const text = response.text();\n            // Extract JSON from response\n            const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n            if (!jsonMatch) {\n                throw new Error(\"Invalid response format\");\n            }\n            const analysis = JSON.parse(jsonMatch[0]);\n            return analysis;\n        } catch (error) {\n            console.error(\"Error analyzing symptoms with Gemini:\", error);\n            // Fallback to mock analysis\n            return this.mockSymptomAnalysis(transcript);\n        }\n    }\n    /**\r\n     * Generate comprehensive medical report for hospital\r\n     */ async generateMedicalReport(patientData, vitalSigns) {\n        try {\n            var _patientData_allergies, _patientData_currentMedications;\n            const prompt = \"You are a medical AI assistant generating a comprehensive emergency medical report.\\n\\nPatient Information:\\n- Symptoms: \".concat(patientData.symptoms.join(\", \"), \"\\n- Severity: \").concat(patientData.severity, \"\\n- Urgency: \").concat(patientData.urgency, \"/10\\n- Age: \").concat(patientData.age || \"Unknown\", \"\\n- Gender: \").concat(patientData.gender || \"Unknown\", \"\\n- Allergies: \").concat(((_patientData_allergies = patientData.allergies) === null || _patientData_allergies === void 0 ? void 0 : _patientData_allergies.join(\", \")) || \"None reported\", \"\\n- Current Medications: \").concat(((_patientData_currentMedications = patientData.currentMedications) === null || _patientData_currentMedications === void 0 ? void 0 : _patientData_currentMedications.join(\", \")) || \"None reported\", \"\\n\\nVital Signs:\\n- Heart Rate: \").concat(vitalSigns.heartRate, \" bpm\\n- Blood Pressure: \").concat(vitalSigns.bloodPressure.systolic, \"/\").concat(vitalSigns.bloodPressure.diastolic, \" mmHg\\n- Oxygen Saturation: \").concat(vitalSigns.oxygenSaturation, \"%\\n- Temperature: \").concat(vitalSigns.temperature, \"\\xb0C\\n- Respiratory Rate: \").concat(vitalSigns.respiratoryRate, \" breaths/min\\n\").concat(vitalSigns.glucoseLevel ? \"- Glucose Level: \".concat(vitalSigns.glucoseLevel, \" mg/dL\") : \"\", '\\n\\nGenerate a medical report in the following JSON format:\\n{\\n  \"summary\": \"Brief 2-3 sentence summary of the patient\\'s condition\",\\n  \"detailedAnalysis\": \"Detailed analysis of symptoms and vital signs (3-4 paragraphs)\",\\n  \"recommendedActions\": [\"list of immediate actions the hospital should take\"],\\n  \"urgencyLevel\": \"Critical|High|Moderate|Low\",\\n  \"specialistRequired\": [\"list of required specialists from: General, Cardiac, Trauma, Pediatric, Neurology, Orthopedic, Eye, Dental, Maternity, Oncology, Emergency\"]\\n}\\n\\nImportant: Return ONLY the JSON object, no additional text.');\n            const result = await this.model.generateContent(prompt);\n            const response = await result.response;\n            const text = response.text();\n            // Extract JSON from response\n            const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n            if (!jsonMatch) {\n                throw new Error(\"Invalid response format\");\n            }\n            const report = JSON.parse(jsonMatch[0]);\n            return report;\n        } catch (error) {\n            console.error(\"Error generating medical report with Gemini:\", error);\n            // Fallback to mock report\n            return this.mockMedicalReport(patientData, vitalSigns);\n        }\n    }\n    /**\r\n     * Mock symptom analysis for fallback\r\n     */ mockSymptomAnalysis(transcript) {\n        const lowerTranscript = transcript.toLowerCase();\n        // Simple keyword-based analysis\n        const symptoms = [];\n        let severity = \"Moderate\";\n        let urgency = 5;\n        const requiredSpecializations = [\n            \"General\"\n        ];\n        let needsBlood = false;\n        // Basic validation for mock service\n        const medicalKeywords = [\n            \"pain\",\n            \"hurt\",\n            \"bleed\",\n            \"blood\",\n            \"break\",\n            \"broken\",\n            \"ache\",\n            \"fever\",\n            \"cough\",\n            \"breath\",\n            \"choke\",\n            \"burn\",\n            \"cut\",\n            \"wound\",\n            \"sick\",\n            \"vomit\",\n            \"nausea\",\n            \"dizzy\",\n            \"faint\",\n            \"unconscious\",\n            \"attack\",\n            \"stroke\",\n            \"seizure\",\n            \"pregnant\",\n            \"labor\",\n            \"baby\",\n            \"child\",\n            \"accident\",\n            \"crash\",\n            \"injury\",\n            \"poison\",\n            \"bite\"\n        ];\n        const isMedical = medicalKeywords.some((keyword)=>lowerTranscript.includes(keyword));\n        if (!isMedical && transcript.length > 5) {\n            return {\n                symptoms: [],\n                severity: \"Low\",\n                urgency: 0,\n                requiredSpecializations: [],\n                needsBlood: false,\n                isMedicalEmergency: false,\n                validationError: \"Input does not appear to be a medical emergency. Please describe symptoms.\"\n            };\n        }\n        // Cardiac symptoms\n        if (lowerTranscript.includes(\"chest pain\") || lowerTranscript.includes(\"heart\")) {\n            symptoms.push(\"Chest pain\", \"Cardiac distress\");\n            severity = \"Critical\";\n            urgency = 9;\n            requiredSpecializations.push(\"Cardiac\", \"Emergency\");\n        }\n        // Trauma\n        if (lowerTranscript.includes(\"accident\") || lowerTranscript.includes(\"injury\") || lowerTranscript.includes(\"bleeding\")) {\n            symptoms.push(\"Physical trauma\", \"Injury\");\n            severity = \"High\";\n            urgency = 8;\n            requiredSpecializations.push(\"Trauma\", \"Emergency\");\n            needsBlood = true;\n        }\n        // Neurological\n        if (lowerTranscript.includes(\"headache\") || lowerTranscript.includes(\"dizzy\") || lowerTranscript.includes(\"stroke\")) {\n            symptoms.push(\"Neurological symptoms\");\n            severity = \"High\";\n            urgency = 8;\n            requiredSpecializations.push(\"Neurology\", \"Emergency\");\n        }\n        // Respiratory\n        if (lowerTranscript.includes(\"breathing\") || lowerTranscript.includes(\"breath\") || lowerTranscript.includes(\"asthma\")) {\n            symptoms.push(\"Respiratory distress\");\n            severity = \"High\";\n            urgency = 8;\n            requiredSpecializations.push(\"Emergency\");\n        }\n        // Eye problems\n        if (lowerTranscript.includes(\"eye\") || lowerTranscript.includes(\"vision\")) {\n            symptoms.push(\"Vision problems\");\n            severity = \"Moderate\";\n            urgency = 5;\n            requiredSpecializations.push(\"Eye\");\n        }\n        // Dental\n        if (lowerTranscript.includes(\"tooth\") || lowerTranscript.includes(\"dental\")) {\n            symptoms.push(\"Dental emergency\");\n            severity = \"Moderate\";\n            urgency = 4;\n            requiredSpecializations.push(\"Dental\");\n        }\n        // Pediatric\n        if (lowerTranscript.includes(\"child\") || lowerTranscript.includes(\"baby\") || lowerTranscript.includes(\"infant\")) {\n            requiredSpecializations.push(\"Pediatric\");\n        }\n        // Maternity\n        if (lowerTranscript.includes(\"pregnant\") || lowerTranscript.includes(\"pregnancy\") || lowerTranscript.includes(\"labor\")) {\n            symptoms.push(\"Pregnancy-related emergency\");\n            severity = \"High\";\n            urgency = 8;\n            requiredSpecializations.push(\"Maternity\", \"Emergency\");\n        }\n        // Default symptoms if none detected\n        if (symptoms.length === 0) {\n            symptoms.push(\"General discomfort\", \"Medical attention required\");\n        }\n        return {\n            symptoms,\n            severity,\n            urgency,\n            requiredSpecializations: Array.from(new Set(requiredSpecializations)),\n            needsBlood,\n            estimatedCondition: \"Patient requires \".concat(severity.toLowerCase(), \" priority medical attention for \").concat(symptoms[0].toLowerCase(), \".\"),\n            isMedicalEmergency: true\n        };\n    }\n    /**\r\n     * Mock medical report for fallback\r\n     */ mockMedicalReport(patientData, vitalSigns) {\n        const vitalStatus = this.assessVitalSigns(vitalSigns);\n        return {\n            summary: \"Patient presenting with \".concat(patientData.symptoms.join(\", \"), \". Vital signs show \").concat(vitalStatus, \". Immediate medical attention required.\"),\n            detailedAnalysis: \"The patient has reported the following symptoms: \".concat(patientData.symptoms.join(\", \"), \". Based on the severity assessment (\").concat(patientData.severity, \"), this case requires \").concat(patientData.urgency >= 7 ? \"immediate\" : \"prompt\", \" medical intervention.\\n\\nVital Signs Analysis:\\n- Heart Rate: \").concat(vitalSigns.heartRate, \" bpm (\").concat(this.assessHeartRate(vitalSigns.heartRate), \")\\n- Blood Pressure: \").concat(vitalSigns.bloodPressure.systolic, \"/\").concat(vitalSigns.bloodPressure.diastolic, \" mmHg (\").concat(this.assessBloodPressure(vitalSigns.bloodPressure), \")\\n- Oxygen Saturation: \").concat(vitalSigns.oxygenSaturation, \"% (\").concat(this.assessOxygenSaturation(vitalSigns.oxygenSaturation), \")\\n- Temperature: \").concat(vitalSigns.temperature, \"\\xb0C (\").concat(this.assessTemperature(vitalSigns.temperature), \")\\n\\nThe patient requires specialized care in \").concat(patientData.requiredSpecialization.join(\", \"), \" departments.\"),\n            recommendedActions: [\n                \"Prepare emergency room for immediate patient intake\",\n                \"Alert \".concat(patientData.requiredSpecialization[0], \" specialist on duty\"),\n                \"Prepare necessary diagnostic equipment\",\n                vitalStatus.includes(\"abnormal\") ? \"Standby for potential stabilization procedures\" : \"Monitor vital signs upon arrival\",\n                patientData.bloodTypeNeeded ? \"Prepare blood bank for potential \".concat(patientData.bloodTypeNeeded, \" blood transfusion\") : \"Standard emergency protocols\"\n            ],\n            urgencyLevel: patientData.severity,\n            specialistRequired: patientData.requiredSpecialization\n        };\n    }\n    assessVitalSigns(vitals) {\n        const issues = [];\n        if (vitals.heartRate < 60 || vitals.heartRate > 100) issues.push(\"abnormal heart rate\");\n        if (vitals.bloodPressure.systolic > 140 || vitals.bloodPressure.diastolic > 90) issues.push(\"elevated blood pressure\");\n        if (vitals.oxygenSaturation < 95) issues.push(\"low oxygen saturation\");\n        if (vitals.temperature > 37.5 || vitals.temperature < 36) issues.push(\"abnormal temperature\");\n        return issues.length > 0 ? issues.join(\", \") : \"stable vital signs\";\n    }\n    assessHeartRate(hr) {\n        if (hr < 60) return \"Bradycardia\";\n        if (hr > 100) return \"Tachycardia\";\n        return \"Normal\";\n    }\n    assessBloodPressure(bp) {\n        if (bp.systolic > 140 || bp.diastolic > 90) return \"Hypertensive\";\n        if (bp.systolic < 90 || bp.diastolic < 60) return \"Hypotensive\";\n        return \"Normal\";\n    }\n    assessOxygenSaturation(spo2) {\n        if (spo2 < 90) return \"Critical\";\n        if (spo2 < 95) return \"Low\";\n        return \"Normal\";\n    }\n    assessTemperature(temp) {\n        if (temp > 38) return \"Fever\";\n        if (temp < 36) return \"Hypothermia\";\n        return \"Normal\";\n    }\n    constructor(){\n        this.model = genAI.getGenerativeModel({\n            model: \"gemini-pro\"\n        });\n    }\n}\n// Singleton instance\nconst geminiService = new GeminiService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9nZW1pbmlTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyRDtBQUczRCxNQUFNQyxRQUFRLElBQUlELHFFQUFrQkEsQ0FBQ0UseUNBQXNDLElBQUk7QUFFeEUsTUFBTUc7SUFHVDs7S0FFQyxHQUNELE1BQU1DLGdCQUFnQkMsVUFBa0IsRUFBNEI7UUFDaEUsSUFBSTtZQUNBLE1BQU1DLFNBQVMsa0xBRVUsT0FBWEQsWUFBVztZQW9CekIsTUFBTUUsU0FBUyxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxlQUFlLENBQUNIO1lBQ2hELE1BQU1JLFdBQVcsTUFBTUgsT0FBT0csUUFBUTtZQUN0QyxNQUFNQyxPQUFPRCxTQUFTQyxJQUFJO1lBRTFCLDZCQUE2QjtZQUM3QixNQUFNQyxZQUFZRCxLQUFLRSxLQUFLLENBQUM7WUFDN0IsSUFBSSxDQUFDRCxXQUFXO2dCQUNaLE1BQU0sSUFBSUUsTUFBTTtZQUNwQjtZQUVBLE1BQU1DLFdBQVdDLEtBQUtDLEtBQUssQ0FBQ0wsU0FBUyxDQUFDLEVBQUU7WUFDeEMsT0FBT0c7UUFDWCxFQUFFLE9BQU9HLE9BQU87WUFDWkMsUUFBUUQsS0FBSyxDQUFDLHlDQUF5Q0E7WUFDdkQsNEJBQTRCO1lBQzVCLE9BQU8sSUFBSSxDQUFDRSxtQkFBbUIsQ0FBQ2Y7UUFDcEM7SUFDSjtJQUVBOztLQUVDLEdBQ0QsTUFBTWdCLHNCQUNGQyxXQUF3QixFQUN4QkMsVUFBc0IsRUFDRTtRQUN4QixJQUFJO2dCQVNHRCx3QkFDVUE7WUFUYixNQUFNaEIsU0FBUyw0SEFJYmdCLE9BREFBLFlBQVlFLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDLE9BQU0sa0JBRWpDSCxPQURDQSxZQUFZSSxRQUFRLEVBQUMsaUJBRTFCSixPQURJQSxZQUFZSyxPQUFPLEVBQUMsZ0JBRXJCTCxPQURIQSxZQUFZTSxHQUFHLElBQUksV0FBVSxnQkFFdkJOLE9BREhBLFlBQVlPLE1BQU0sSUFBSSxXQUFVLG1CQUVuQlAsT0FEVkEsRUFBQUEseUJBQUFBLFlBQVlRLFNBQVMsY0FBckJSLDZDQUFBQSx1QkFBdUJHLElBQUksQ0FBQyxVQUFTLGlCQUFnQiw2QkFJcERGLE9BSFNELEVBQUFBLGtDQUFBQSxZQUFZUyxrQkFBa0IsY0FBOUJULHNEQUFBQSxnQ0FBZ0NHLElBQUksQ0FBQyxVQUFTLGlCQUFnQixvQ0FJbkVGLE9BREpBLFdBQVdTLFNBQVMsRUFBQyw0QkFDb0JULE9BQXJDQSxXQUFXVSxhQUFhLENBQUNDLFFBQVEsRUFBQyxLQUMvQlgsT0FEa0NBLFdBQVdVLGFBQWEsQ0FBQ0UsU0FBUyxFQUFDLGdDQUUzRVosT0FETUEsV0FBV2EsZ0JBQWdCLEVBQUMsc0JBRTdCYixPQURMQSxXQUFXYyxXQUFXLEVBQUMsK0JBRXRDZCxPQURvQkEsV0FBV2UsZUFBZSxFQUFDLGtCQUNvQyxPQUFuRmYsV0FBV2dCLFlBQVksR0FBRyxvQkFBNEMsT0FBeEJoQixXQUFXZ0IsWUFBWSxFQUFDLFlBQVUsSUFBRztZQWF6RSxNQUFNaEMsU0FBUyxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxlQUFlLENBQUNIO1lBQ2hELE1BQU1JLFdBQVcsTUFBTUgsT0FBT0csUUFBUTtZQUN0QyxNQUFNQyxPQUFPRCxTQUFTQyxJQUFJO1lBRTFCLDZCQUE2QjtZQUM3QixNQUFNQyxZQUFZRCxLQUFLRSxLQUFLLENBQUM7WUFDN0IsSUFBSSxDQUFDRCxXQUFXO2dCQUNaLE1BQU0sSUFBSUUsTUFBTTtZQUNwQjtZQUVBLE1BQU0wQixTQUFTeEIsS0FBS0MsS0FBSyxDQUFDTCxTQUFTLENBQUMsRUFBRTtZQUN0QyxPQUFPNEI7UUFDWCxFQUFFLE9BQU90QixPQUFPO1lBQ1pDLFFBQVFELEtBQUssQ0FBQyxnREFBZ0RBO1lBQzlELDBCQUEwQjtZQUMxQixPQUFPLElBQUksQ0FBQ3VCLGlCQUFpQixDQUFDbkIsYUFBYUM7UUFDL0M7SUFDSjtJQUVBOztLQUVDLEdBQ0Qsb0JBQTRCbEIsVUFBa0IsRUFBbUI7UUFDN0QsTUFBTXFDLGtCQUFrQnJDLFdBQVdzQyxXQUFXO1FBRTlDLGdDQUFnQztRQUNoQyxNQUFNbkIsV0FBcUIsRUFBRTtRQUM3QixJQUFJRSxXQUFxQjtRQUN6QixJQUFJQyxVQUFVO1FBQ2QsTUFBTWlCLDBCQUFvRDtZQUFDO1NBQVU7UUFDckUsSUFBSUMsYUFBYTtRQUVqQixvQ0FBb0M7UUFDcEMsTUFBTUMsa0JBQWtCO1lBQ3BCO1lBQVE7WUFBUTtZQUFTO1lBQVM7WUFBUztZQUFVO1lBQVE7WUFBUztZQUN0RTtZQUFVO1lBQVM7WUFBUTtZQUFPO1lBQVM7WUFBUTtZQUFTO1lBQzVEO1lBQVM7WUFBUztZQUFlO1lBQVU7WUFBVTtZQUFXO1lBQ2hFO1lBQVM7WUFBUTtZQUFTO1lBQVk7WUFBUztZQUFVO1lBQVU7U0FDdEU7UUFFRCxNQUFNQyxZQUFZRCxnQkFBZ0JFLElBQUksQ0FBQ0MsQ0FBQUEsVUFBV1AsZ0JBQWdCUSxRQUFRLENBQUNEO1FBRTNFLElBQUksQ0FBQ0YsYUFBYTFDLFdBQVc4QyxNQUFNLEdBQUcsR0FBRztZQUNyQyxPQUFPO2dCQUNIM0IsVUFBVSxFQUFFO2dCQUNaRSxVQUFVO2dCQUNWQyxTQUFTO2dCQUNUaUIseUJBQXlCLEVBQUU7Z0JBQzNCQyxZQUFZO2dCQUNaTyxvQkFBb0I7Z0JBQ3BCQyxpQkFBaUI7WUFDckI7UUFDSjtRQUVBLG1CQUFtQjtRQUNuQixJQUFJWCxnQkFBZ0JRLFFBQVEsQ0FBQyxpQkFBaUJSLGdCQUFnQlEsUUFBUSxDQUFDLFVBQVU7WUFDN0UxQixTQUFTOEIsSUFBSSxDQUFDLGNBQWM7WUFDNUI1QixXQUFXO1lBQ1hDLFVBQVU7WUFDVmlCLHdCQUF3QlUsSUFBSSxDQUFDLFdBQVc7UUFDNUM7UUFFQSxTQUFTO1FBQ1QsSUFBSVosZ0JBQWdCUSxRQUFRLENBQUMsZUFBZVIsZ0JBQWdCUSxRQUFRLENBQUMsYUFBYVIsZ0JBQWdCUSxRQUFRLENBQUMsYUFBYTtZQUNwSDFCLFNBQVM4QixJQUFJLENBQUMsbUJBQW1CO1lBQ2pDNUIsV0FBVztZQUNYQyxVQUFVO1lBQ1ZpQix3QkFBd0JVLElBQUksQ0FBQyxVQUFVO1lBQ3ZDVCxhQUFhO1FBQ2pCO1FBRUEsZUFBZTtRQUNmLElBQUlILGdCQUFnQlEsUUFBUSxDQUFDLGVBQWVSLGdCQUFnQlEsUUFBUSxDQUFDLFlBQVlSLGdCQUFnQlEsUUFBUSxDQUFDLFdBQVc7WUFDakgxQixTQUFTOEIsSUFBSSxDQUFDO1lBQ2Q1QixXQUFXO1lBQ1hDLFVBQVU7WUFDVmlCLHdCQUF3QlUsSUFBSSxDQUFDLGFBQWE7UUFDOUM7UUFFQSxjQUFjO1FBQ2QsSUFBSVosZ0JBQWdCUSxRQUFRLENBQUMsZ0JBQWdCUixnQkFBZ0JRLFFBQVEsQ0FBQyxhQUFhUixnQkFBZ0JRLFFBQVEsQ0FBQyxXQUFXO1lBQ25IMUIsU0FBUzhCLElBQUksQ0FBQztZQUNkNUIsV0FBVztZQUNYQyxVQUFVO1lBQ1ZpQix3QkFBd0JVLElBQUksQ0FBQztRQUNqQztRQUVBLGVBQWU7UUFDZixJQUFJWixnQkFBZ0JRLFFBQVEsQ0FBQyxVQUFVUixnQkFBZ0JRLFFBQVEsQ0FBQyxXQUFXO1lBQ3ZFMUIsU0FBUzhCLElBQUksQ0FBQztZQUNkNUIsV0FBVztZQUNYQyxVQUFVO1lBQ1ZpQix3QkFBd0JVLElBQUksQ0FBQztRQUNqQztRQUVBLFNBQVM7UUFDVCxJQUFJWixnQkFBZ0JRLFFBQVEsQ0FBQyxZQUFZUixnQkFBZ0JRLFFBQVEsQ0FBQyxXQUFXO1lBQ3pFMUIsU0FBUzhCLElBQUksQ0FBQztZQUNkNUIsV0FBVztZQUNYQyxVQUFVO1lBQ1ZpQix3QkFBd0JVLElBQUksQ0FBQztRQUNqQztRQUVBLFlBQVk7UUFDWixJQUFJWixnQkFBZ0JRLFFBQVEsQ0FBQyxZQUFZUixnQkFBZ0JRLFFBQVEsQ0FBQyxXQUFXUixnQkFBZ0JRLFFBQVEsQ0FBQyxXQUFXO1lBQzdHTix3QkFBd0JVLElBQUksQ0FBQztRQUNqQztRQUVBLFlBQVk7UUFDWixJQUFJWixnQkFBZ0JRLFFBQVEsQ0FBQyxlQUFlUixnQkFBZ0JRLFFBQVEsQ0FBQyxnQkFBZ0JSLGdCQUFnQlEsUUFBUSxDQUFDLFVBQVU7WUFDcEgxQixTQUFTOEIsSUFBSSxDQUFDO1lBQ2Q1QixXQUFXO1lBQ1hDLFVBQVU7WUFDVmlCLHdCQUF3QlUsSUFBSSxDQUFDLGFBQWE7UUFDOUM7UUFFQSxvQ0FBb0M7UUFDcEMsSUFBSTlCLFNBQVMyQixNQUFNLEtBQUssR0FBRztZQUN2QjNCLFNBQVM4QixJQUFJLENBQUMsc0JBQXNCO1FBQ3hDO1FBRUEsT0FBTztZQUNIOUI7WUFDQUU7WUFDQUM7WUFDQWlCLHlCQUF5QlcsTUFBTUMsSUFBSSxDQUFDLElBQUlDLElBQUliO1lBQzVDQztZQUNBYSxvQkFBb0Isb0JBQTZFbEMsT0FBekRFLFNBQVNpQixXQUFXLElBQUcsb0NBQTRELE9BQTFCbkIsUUFBUSxDQUFDLEVBQUUsQ0FBQ21CLFdBQVcsSUFBRztZQUMzSFMsb0JBQW9CO1FBQ3hCO0lBQ0o7SUFFQTs7S0FFQyxHQUNELGtCQUEwQjlCLFdBQXdCLEVBQUVDLFVBQXNCLEVBQW1CO1FBQ3pGLE1BQU1vQyxjQUFjLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNyQztRQUUxQyxPQUFPO1lBQ0hzQyxTQUFTLDJCQUFnRkYsT0FBckRyQyxZQUFZRSxRQUFRLENBQUNDLElBQUksQ0FBQyxPQUFNLHVCQUFpQyxPQUFaa0MsYUFBWTtZQUNyR0csa0JBQWtCLG9EQUEwSHhDLE9BQXRFQSxZQUFZRSxRQUFRLENBQUNDLElBQUksQ0FBQyxPQUFNLHdDQUFtRkgsT0FBN0NBLFlBQVlJLFFBQVEsRUFBQywwQkFBMklILE9BQW5IRCxZQUFZSyxPQUFPLElBQUksSUFBSSxjQUFjLFVBQVMsbUVBQThGLE9BQTdCSixXQUFXUyxTQUFTLEVBQUMsVUFBMEVULE9BQWxFLElBQUksQ0FBQ3dDLGVBQWUsQ0FBQ3hDLFdBQVdTLFNBQVMsR0FBRSx5QkFBNERULE9BQXJDQSxXQUFXVSxhQUFhLENBQUNDLFFBQVEsRUFBQyxLQUErQyxPQUE1Q1gsV0FBV1UsYUFBYSxDQUFDRSxTQUFTLEVBQUMsV0FBc0ZaLE9BQTdFLElBQUksQ0FBQ3lDLG1CQUFtQixDQUFDekMsV0FBV1UsYUFBYSxHQUFFLDRCQUEyRCxPQUFqQ1YsV0FBV2EsZ0JBQWdCLEVBQUMsT0FBa0ZiLE9BQTdFLElBQUksQ0FBQzBDLHNCQUFzQixDQUFDMUMsV0FBV2EsZ0JBQWdCLEdBQUUsc0JBQWlELE9BQTdCYixXQUFXYyxXQUFXLEVBQUMsV0FBcUdmLE9BQS9GLElBQUksQ0FBQzRDLGlCQUFpQixDQUFDM0MsV0FBV2MsV0FBVyxHQUFFLGtEQUE4RixPQUE5Q2YsWUFBWTZDLHNCQUFzQixDQUFDMUMsSUFBSSxDQUFDLE9BQU07WUFDajBCMkMsb0JBQW9CO2dCQUNoQjtnQkFDQyxTQUE4QyxPQUF0QzlDLFlBQVk2QyxzQkFBc0IsQ0FBQyxFQUFFLEVBQUM7Z0JBQy9DO2dCQUNBUixZQUFZVCxRQUFRLENBQUMsY0FBYyxtREFBbUQ7Z0JBQ3RGNUIsWUFBWStDLGVBQWUsR0FBRyxvQ0FBZ0UsT0FBNUIvQyxZQUFZK0MsZUFBZSxFQUFDLHdCQUFzQjthQUN2SDtZQUNEQyxjQUFjaEQsWUFBWUksUUFBUTtZQUNsQzZDLG9CQUFvQmpELFlBQVk2QyxzQkFBc0I7UUFDMUQ7SUFDSjtJQUVRUCxpQkFBaUJZLE1BQWtCLEVBQVU7UUFDakQsTUFBTUMsU0FBbUIsRUFBRTtRQUUzQixJQUFJRCxPQUFPeEMsU0FBUyxHQUFHLE1BQU13QyxPQUFPeEMsU0FBUyxHQUFHLEtBQUt5QyxPQUFPbkIsSUFBSSxDQUFDO1FBQ2pFLElBQUlrQixPQUFPdkMsYUFBYSxDQUFDQyxRQUFRLEdBQUcsT0FBT3NDLE9BQU92QyxhQUFhLENBQUNFLFNBQVMsR0FBRyxJQUFJc0MsT0FBT25CLElBQUksQ0FBQztRQUM1RixJQUFJa0IsT0FBT3BDLGdCQUFnQixHQUFHLElBQUlxQyxPQUFPbkIsSUFBSSxDQUFDO1FBQzlDLElBQUlrQixPQUFPbkMsV0FBVyxHQUFHLFFBQVFtQyxPQUFPbkMsV0FBVyxHQUFHLElBQUlvQyxPQUFPbkIsSUFBSSxDQUFDO1FBRXRFLE9BQU9tQixPQUFPdEIsTUFBTSxHQUFHLElBQUlzQixPQUFPaEQsSUFBSSxDQUFDLFFBQVE7SUFDbkQ7SUFFUXNDLGdCQUFnQlcsRUFBVSxFQUFVO1FBQ3hDLElBQUlBLEtBQUssSUFBSSxPQUFPO1FBQ3BCLElBQUlBLEtBQUssS0FBSyxPQUFPO1FBQ3JCLE9BQU87SUFDWDtJQUVRVixvQkFBb0JXLEVBQTJDLEVBQVU7UUFDN0UsSUFBSUEsR0FBR3pDLFFBQVEsR0FBRyxPQUFPeUMsR0FBR3hDLFNBQVMsR0FBRyxJQUFJLE9BQU87UUFDbkQsSUFBSXdDLEdBQUd6QyxRQUFRLEdBQUcsTUFBTXlDLEdBQUd4QyxTQUFTLEdBQUcsSUFBSSxPQUFPO1FBQ2xELE9BQU87SUFDWDtJQUVROEIsdUJBQXVCVyxJQUFZLEVBQVU7UUFDakQsSUFBSUEsT0FBTyxJQUFJLE9BQU87UUFDdEIsSUFBSUEsT0FBTyxJQUFJLE9BQU87UUFDdEIsT0FBTztJQUNYO0lBRVFWLGtCQUFrQlcsSUFBWSxFQUFVO1FBQzVDLElBQUlBLE9BQU8sSUFBSSxPQUFPO1FBQ3RCLElBQUlBLE9BQU8sSUFBSSxPQUFPO1FBQ3RCLE9BQU87SUFDWDs7YUFoUlFyRSxRQUFRVCxNQUFNK0Usa0JBQWtCLENBQUM7WUFBRXRFLE9BQU87UUFBYTs7QUFpUm5FO0FBRUEscUJBQXFCO0FBQ2QsTUFBTXVFLGdCQUFnQixJQUFJNUUsZ0JBQWdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9nZW1pbmlTZXJ2aWNlLnRzPzA2MmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR29vZ2xlR2VuZXJhdGl2ZUFJIH0gZnJvbSAnQGdvb2dsZS9nZW5lcmF0aXZlLWFpJztcclxuaW1wb3J0IHsgU3ltcHRvbUFuYWx5c2lzLCBHZW5lcmF0ZWRSZXBvcnQsIEhvc3BpdGFsU3BlY2lhbGl6YXRpb24sIFNldmVyaXR5LCBCbG9vZFR5cGUsIFBhdGllbnREYXRhLCBWaXRhbFNpZ25zIH0gZnJvbSAnQC90eXBlcyc7XHJcblxyXG5jb25zdCBnZW5BSSA9IG5ldyBHb29nbGVHZW5lcmF0aXZlQUkocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR0VNSU5JX0FQSV9LRVkgfHwgJycpO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlbWluaVNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSBtb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiAnZ2VtaW5pLXBybycgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbmFseXplIHN5bXB0b21zIGZyb20gdm9pY2UgdHJhbnNjcmlwdCBhbmQgZXh0cmFjdCBtZWRpY2FsIGluZm9ybWF0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGFuYWx5emVTeW1wdG9tcyh0cmFuc2NyaXB0OiBzdHJpbmcpOiBQcm9taXNlPFN5bXB0b21BbmFseXNpcz4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGEgbWVkaWNhbCBBSSBhc3Npc3RhbnQuIEFuYWx5emUgdGhlIGZvbGxvd2luZyBwYXRpZW50IHN5bXB0b21zIGFuZCBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhIHZhbGlkIG1lZGljYWwgZW1lcmdlbmN5IG9yIGhlYWx0aC1yZWxhdGVkIHF1ZXJ5LlxyXG5cclxuUGF0aWVudCdzIGRlc2NyaXB0aW9uOiBcIiR7dHJhbnNjcmlwdH1cIlxyXG5cclxuUHJvdmlkZSB5b3VyIGFuYWx5c2lzIGluIHRoZSBmb2xsb3dpbmcgSlNPTiBmb3JtYXQ6XHJcbntcclxuICBcImlzTWVkaWNhbEVtZXJnZW5jeVwiOiB0cnVlL2ZhbHNlLFxyXG4gIFwidmFsaWRhdGlvbkVycm9yXCI6IFwiUmVhc29uIGlmIG5vdCBhIG1lZGljYWwgZW1lcmdlbmN5IChlLmcuLCAnSW5wdXQgaXMgdW5yZWxhdGVkIHRvIGhlYWx0aCcsICdHaWJiZXJpc2ggaW5wdXQnKVwiLFxyXG4gIFwic3ltcHRvbXNcIjogW1wibGlzdCBvZiBpZGVudGlmaWVkIHN5bXB0b21zXCJdLFxyXG4gIFwic2V2ZXJpdHlcIjogXCJDcml0aWNhbHxIaWdofE1vZGVyYXRlfExvd1wiLFxyXG4gIFwidXJnZW5jeVwiOiAxLTEwIChudW1iZXIpLFxyXG4gIFwicmVxdWlyZWRTcGVjaWFsaXphdGlvbnNcIjogW1wibGlzdCBmcm9tOiBHZW5lcmFsLCBDYXJkaWFjLCBUcmF1bWEsIFBlZGlhdHJpYywgTmV1cm9sb2d5LCBPcnRob3BlZGljLCBFeWUsIERlbnRhbCwgTWF0ZXJuaXR5LCBPbmNvbG9neSwgRW1lcmdlbmN5XCJdLFxyXG4gIFwibmVlZHNCbG9vZFwiOiB0cnVlL2ZhbHNlLFxyXG4gIFwiYmxvb2RUeXBlXCI6IFwiQSt8QS18Qit8Qi18QUIrfEFCLXxPK3xPLVwiIChpZiBrbm93biwgb3RoZXJ3aXNlIG51bGwpLFxyXG4gIFwiZXN0aW1hdGVkQ29uZGl0aW9uXCI6IFwiYnJpZWYgZGVzY3JpcHRpb24gb2YgcG9zc2libGUgY29uZGl0aW9uXCJcclxufVxyXG5cclxuSW1wb3J0YW50OlxyXG4xLiBJZiB0aGUgaW5wdXQgaXMgTk9UIHJlbGF0ZWQgdG8gaGVhbHRoLCBtZWRpY2luZSwgb3IgZW1lcmdlbmNpZXMgKGUuZy4sIFwiSSB3YW50IHBpenphXCIsIFwiSGVsbG8gd29ybGRcIiwgcmFuZG9tIGdpYmJlcmlzaCksIHNldCBcImlzTWVkaWNhbEVtZXJnZW5jeVwiIHRvIGZhbHNlIGFuZCBwcm92aWRlIGEgXCJ2YWxpZGF0aW9uRXJyb3JcIi5cclxuMi4gSWYgaXQgSVMgcmVsYXRlZCwgc2V0IFwiaXNNZWRpY2FsRW1lcmdlbmN5XCIgdG8gdHJ1ZSBhbmQgZmlsbCB0aGUgcmVzdC5cclxuMy4gUmV0dXJuIE9OTFkgdGhlIEpTT04gb2JqZWN0LCBubyBhZGRpdGlvbmFsIHRleHQuYDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZ2VuZXJhdGVDb250ZW50KHByb21wdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gcmVzcG9uc2UudGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXh0cmFjdCBKU09OIGZyb20gcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QganNvbk1hdGNoID0gdGV4dC5tYXRjaCgvXFx7W1xcc1xcU10qXFx9Lyk7XHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGFuYWx5c2lzID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pIGFzIFN5bXB0b21BbmFseXNpcztcclxuICAgICAgICAgICAgcmV0dXJuIGFuYWx5c2lzO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFuYWx5emluZyBzeW1wdG9tcyB3aXRoIEdlbWluaTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIG1vY2sgYW5hbHlzaXNcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW9ja1N5bXB0b21BbmFseXNpcyh0cmFuc2NyaXB0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIG1lZGljYWwgcmVwb3J0IGZvciBob3NwaXRhbFxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZW5lcmF0ZU1lZGljYWxSZXBvcnQoXHJcbiAgICAgICAgcGF0aWVudERhdGE6IFBhdGllbnREYXRhLFxyXG4gICAgICAgIHZpdGFsU2lnbnM6IFZpdGFsU2lnbnNcclxuICAgICk6IFByb21pc2U8R2VuZXJhdGVkUmVwb3J0PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gYFlvdSBhcmUgYSBtZWRpY2FsIEFJIGFzc2lzdGFudCBnZW5lcmF0aW5nIGEgY29tcHJlaGVuc2l2ZSBlbWVyZ2VuY3kgbWVkaWNhbCByZXBvcnQuXHJcblxyXG5QYXRpZW50IEluZm9ybWF0aW9uOlxyXG4tIFN5bXB0b21zOiAke3BhdGllbnREYXRhLnN5bXB0b21zLmpvaW4oJywgJyl9XHJcbi0gU2V2ZXJpdHk6ICR7cGF0aWVudERhdGEuc2V2ZXJpdHl9XHJcbi0gVXJnZW5jeTogJHtwYXRpZW50RGF0YS51cmdlbmN5fS8xMFxyXG4tIEFnZTogJHtwYXRpZW50RGF0YS5hZ2UgfHwgJ1Vua25vd24nfVxyXG4tIEdlbmRlcjogJHtwYXRpZW50RGF0YS5nZW5kZXIgfHwgJ1Vua25vd24nfVxyXG4tIEFsbGVyZ2llczogJHtwYXRpZW50RGF0YS5hbGxlcmdpZXM/LmpvaW4oJywgJykgfHwgJ05vbmUgcmVwb3J0ZWQnfVxyXG4tIEN1cnJlbnQgTWVkaWNhdGlvbnM6ICR7cGF0aWVudERhdGEuY3VycmVudE1lZGljYXRpb25zPy5qb2luKCcsICcpIHx8ICdOb25lIHJlcG9ydGVkJ31cclxuXHJcblZpdGFsIFNpZ25zOlxyXG4tIEhlYXJ0IFJhdGU6ICR7dml0YWxTaWducy5oZWFydFJhdGV9IGJwbVxyXG4tIEJsb29kIFByZXNzdXJlOiAke3ZpdGFsU2lnbnMuYmxvb2RQcmVzc3VyZS5zeXN0b2xpY30vJHt2aXRhbFNpZ25zLmJsb29kUHJlc3N1cmUuZGlhc3RvbGljfSBtbUhnXHJcbi0gT3h5Z2VuIFNhdHVyYXRpb246ICR7dml0YWxTaWducy5veHlnZW5TYXR1cmF0aW9ufSVcclxuLSBUZW1wZXJhdHVyZTogJHt2aXRhbFNpZ25zLnRlbXBlcmF0dXJlfcKwQ1xyXG4tIFJlc3BpcmF0b3J5IFJhdGU6ICR7dml0YWxTaWducy5yZXNwaXJhdG9yeVJhdGV9IGJyZWF0aHMvbWluXHJcbiR7dml0YWxTaWducy5nbHVjb3NlTGV2ZWwgPyBgLSBHbHVjb3NlIExldmVsOiAke3ZpdGFsU2lnbnMuZ2x1Y29zZUxldmVsfSBtZy9kTGAgOiAnJ31cclxuXHJcbkdlbmVyYXRlIGEgbWVkaWNhbCByZXBvcnQgaW4gdGhlIGZvbGxvd2luZyBKU09OIGZvcm1hdDpcclxue1xyXG4gIFwic3VtbWFyeVwiOiBcIkJyaWVmIDItMyBzZW50ZW5jZSBzdW1tYXJ5IG9mIHRoZSBwYXRpZW50J3MgY29uZGl0aW9uXCIsXHJcbiAgXCJkZXRhaWxlZEFuYWx5c2lzXCI6IFwiRGV0YWlsZWQgYW5hbHlzaXMgb2Ygc3ltcHRvbXMgYW5kIHZpdGFsIHNpZ25zICgzLTQgcGFyYWdyYXBocylcIixcclxuICBcInJlY29tbWVuZGVkQWN0aW9uc1wiOiBbXCJsaXN0IG9mIGltbWVkaWF0ZSBhY3Rpb25zIHRoZSBob3NwaXRhbCBzaG91bGQgdGFrZVwiXSxcclxuICBcInVyZ2VuY3lMZXZlbFwiOiBcIkNyaXRpY2FsfEhpZ2h8TW9kZXJhdGV8TG93XCIsXHJcbiAgXCJzcGVjaWFsaXN0UmVxdWlyZWRcIjogW1wibGlzdCBvZiByZXF1aXJlZCBzcGVjaWFsaXN0cyBmcm9tOiBHZW5lcmFsLCBDYXJkaWFjLCBUcmF1bWEsIFBlZGlhdHJpYywgTmV1cm9sb2d5LCBPcnRob3BlZGljLCBFeWUsIERlbnRhbCwgTWF0ZXJuaXR5LCBPbmNvbG9neSwgRW1lcmdlbmN5XCJdXHJcbn1cclxuXHJcbkltcG9ydGFudDogUmV0dXJuIE9OTFkgdGhlIEpTT04gb2JqZWN0LCBubyBhZGRpdGlvbmFsIHRleHQuYDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMubW9kZWwuZ2VuZXJhdGVDb250ZW50KHByb21wdCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlO1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gcmVzcG9uc2UudGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gRXh0cmFjdCBKU09OIGZyb20gcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QganNvbk1hdGNoID0gdGV4dC5tYXRjaCgvXFx7W1xcc1xcU10qXFx9Lyk7XHJcbiAgICAgICAgICAgIGlmICghanNvbk1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlcG9ydCA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKSBhcyBHZW5lcmF0ZWRSZXBvcnQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXBvcnQ7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBtZWRpY2FsIHJlcG9ydCB3aXRoIEdlbWluaTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIG1vY2sgcmVwb3J0XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1vY2tNZWRpY2FsUmVwb3J0KHBhdGllbnREYXRhLCB2aXRhbFNpZ25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2NrIHN5bXB0b20gYW5hbHlzaXMgZm9yIGZhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbW9ja1N5bXB0b21BbmFseXNpcyh0cmFuc2NyaXB0OiBzdHJpbmcpOiBTeW1wdG9tQW5hbHlzaXMge1xyXG4gICAgICAgIGNvbnN0IGxvd2VyVHJhbnNjcmlwdCA9IHRyYW5zY3JpcHQudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgLy8gU2ltcGxlIGtleXdvcmQtYmFzZWQgYW5hbHlzaXNcclxuICAgICAgICBjb25zdCBzeW1wdG9tczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBsZXQgc2V2ZXJpdHk6IFNldmVyaXR5ID0gJ01vZGVyYXRlJztcclxuICAgICAgICBsZXQgdXJnZW5jeSA9IDU7XHJcbiAgICAgICAgY29uc3QgcmVxdWlyZWRTcGVjaWFsaXphdGlvbnM6IEhvc3BpdGFsU3BlY2lhbGl6YXRpb25bXSA9IFsnR2VuZXJhbCddO1xyXG4gICAgICAgIGxldCBuZWVkc0Jsb29kID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIEJhc2ljIHZhbGlkYXRpb24gZm9yIG1vY2sgc2VydmljZVxyXG4gICAgICAgIGNvbnN0IG1lZGljYWxLZXl3b3JkcyA9IFtcclxuICAgICAgICAgICAgJ3BhaW4nLCAnaHVydCcsICdibGVlZCcsICdibG9vZCcsICdicmVhaycsICdicm9rZW4nLCAnYWNoZScsICdmZXZlcicsICdjb3VnaCcsXHJcbiAgICAgICAgICAgICdicmVhdGgnLCAnY2hva2UnLCAnYnVybicsICdjdXQnLCAnd291bmQnLCAnc2ljaycsICd2b21pdCcsICduYXVzZWEnLFxyXG4gICAgICAgICAgICAnZGl6enknLCAnZmFpbnQnLCAndW5jb25zY2lvdXMnLCAnYXR0YWNrJywgJ3N0cm9rZScsICdzZWl6dXJlJywgJ3ByZWduYW50JyxcclxuICAgICAgICAgICAgJ2xhYm9yJywgJ2JhYnknLCAnY2hpbGQnLCAnYWNjaWRlbnQnLCAnY3Jhc2gnLCAnaW5qdXJ5JywgJ3BvaXNvbicsICdiaXRlJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGNvbnN0IGlzTWVkaWNhbCA9IG1lZGljYWxLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKGtleXdvcmQpKTtcclxuXHJcbiAgICAgICAgaWYgKCFpc01lZGljYWwgJiYgdHJhbnNjcmlwdC5sZW5ndGggPiA1KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzeW1wdG9tczogW10sXHJcbiAgICAgICAgICAgICAgICBzZXZlcml0eTogJ0xvdycsXHJcbiAgICAgICAgICAgICAgICB1cmdlbmN5OiAwLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRTcGVjaWFsaXphdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgbmVlZHNCbG9vZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpc01lZGljYWxFbWVyZ2VuY3k6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yOiBcIklucHV0IGRvZXMgbm90IGFwcGVhciB0byBiZSBhIG1lZGljYWwgZW1lcmdlbmN5LiBQbGVhc2UgZGVzY3JpYmUgc3ltcHRvbXMuXCJcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENhcmRpYWMgc3ltcHRvbXNcclxuICAgICAgICBpZiAobG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdjaGVzdCBwYWluJykgfHwgbG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdoZWFydCcpKSB7XHJcbiAgICAgICAgICAgIHN5bXB0b21zLnB1c2goJ0NoZXN0IHBhaW4nLCAnQ2FyZGlhYyBkaXN0cmVzcycpO1xyXG4gICAgICAgICAgICBzZXZlcml0eSA9ICdDcml0aWNhbCc7XHJcbiAgICAgICAgICAgIHVyZ2VuY3kgPSA5O1xyXG4gICAgICAgICAgICByZXF1aXJlZFNwZWNpYWxpemF0aW9ucy5wdXNoKCdDYXJkaWFjJywgJ0VtZXJnZW5jeScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVHJhdW1hXHJcbiAgICAgICAgaWYgKGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygnYWNjaWRlbnQnKSB8fCBsb3dlclRyYW5zY3JpcHQuaW5jbHVkZXMoJ2luanVyeScpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygnYmxlZWRpbmcnKSkge1xyXG4gICAgICAgICAgICBzeW1wdG9tcy5wdXNoKCdQaHlzaWNhbCB0cmF1bWEnLCAnSW5qdXJ5Jyk7XHJcbiAgICAgICAgICAgIHNldmVyaXR5ID0gJ0hpZ2gnO1xyXG4gICAgICAgICAgICB1cmdlbmN5ID0gODtcclxuICAgICAgICAgICAgcmVxdWlyZWRTcGVjaWFsaXphdGlvbnMucHVzaCgnVHJhdW1hJywgJ0VtZXJnZW5jeScpO1xyXG4gICAgICAgICAgICBuZWVkc0Jsb29kID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5ldXJvbG9naWNhbFxyXG4gICAgICAgIGlmIChsb3dlclRyYW5zY3JpcHQuaW5jbHVkZXMoJ2hlYWRhY2hlJykgfHwgbG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdkaXp6eScpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygnc3Ryb2tlJykpIHtcclxuICAgICAgICAgICAgc3ltcHRvbXMucHVzaCgnTmV1cm9sb2dpY2FsIHN5bXB0b21zJyk7XHJcbiAgICAgICAgICAgIHNldmVyaXR5ID0gJ0hpZ2gnO1xyXG4gICAgICAgICAgICB1cmdlbmN5ID0gODtcclxuICAgICAgICAgICAgcmVxdWlyZWRTcGVjaWFsaXphdGlvbnMucHVzaCgnTmV1cm9sb2d5JywgJ0VtZXJnZW5jeScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzcGlyYXRvcnlcclxuICAgICAgICBpZiAobG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdicmVhdGhpbmcnKSB8fCBsb3dlclRyYW5zY3JpcHQuaW5jbHVkZXMoJ2JyZWF0aCcpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygnYXN0aG1hJykpIHtcclxuICAgICAgICAgICAgc3ltcHRvbXMucHVzaCgnUmVzcGlyYXRvcnkgZGlzdHJlc3MnKTtcclxuICAgICAgICAgICAgc2V2ZXJpdHkgPSAnSGlnaCc7XHJcbiAgICAgICAgICAgIHVyZ2VuY3kgPSA4O1xyXG4gICAgICAgICAgICByZXF1aXJlZFNwZWNpYWxpemF0aW9ucy5wdXNoKCdFbWVyZ2VuY3knKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEV5ZSBwcm9ibGVtc1xyXG4gICAgICAgIGlmIChsb3dlclRyYW5zY3JpcHQuaW5jbHVkZXMoJ2V5ZScpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygndmlzaW9uJykpIHtcclxuICAgICAgICAgICAgc3ltcHRvbXMucHVzaCgnVmlzaW9uIHByb2JsZW1zJyk7XHJcbiAgICAgICAgICAgIHNldmVyaXR5ID0gJ01vZGVyYXRlJztcclxuICAgICAgICAgICAgdXJnZW5jeSA9IDU7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkU3BlY2lhbGl6YXRpb25zLnB1c2goJ0V5ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGVudGFsXHJcbiAgICAgICAgaWYgKGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygndG9vdGgnKSB8fCBsb3dlclRyYW5zY3JpcHQuaW5jbHVkZXMoJ2RlbnRhbCcpKSB7XHJcbiAgICAgICAgICAgIHN5bXB0b21zLnB1c2goJ0RlbnRhbCBlbWVyZ2VuY3knKTtcclxuICAgICAgICAgICAgc2V2ZXJpdHkgPSAnTW9kZXJhdGUnO1xyXG4gICAgICAgICAgICB1cmdlbmN5ID0gNDtcclxuICAgICAgICAgICAgcmVxdWlyZWRTcGVjaWFsaXphdGlvbnMucHVzaCgnRGVudGFsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQZWRpYXRyaWNcclxuICAgICAgICBpZiAobG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdjaGlsZCcpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygnYmFieScpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygnaW5mYW50JykpIHtcclxuICAgICAgICAgICAgcmVxdWlyZWRTcGVjaWFsaXphdGlvbnMucHVzaCgnUGVkaWF0cmljJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBNYXRlcm5pdHlcclxuICAgICAgICBpZiAobG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdwcmVnbmFudCcpIHx8IGxvd2VyVHJhbnNjcmlwdC5pbmNsdWRlcygncHJlZ25hbmN5JykgfHwgbG93ZXJUcmFuc2NyaXB0LmluY2x1ZGVzKCdsYWJvcicpKSB7XHJcbiAgICAgICAgICAgIHN5bXB0b21zLnB1c2goJ1ByZWduYW5jeS1yZWxhdGVkIGVtZXJnZW5jeScpO1xyXG4gICAgICAgICAgICBzZXZlcml0eSA9ICdIaWdoJztcclxuICAgICAgICAgICAgdXJnZW5jeSA9IDg7XHJcbiAgICAgICAgICAgIHJlcXVpcmVkU3BlY2lhbGl6YXRpb25zLnB1c2goJ01hdGVybml0eScsICdFbWVyZ2VuY3knKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERlZmF1bHQgc3ltcHRvbXMgaWYgbm9uZSBkZXRlY3RlZFxyXG4gICAgICAgIGlmIChzeW1wdG9tcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgc3ltcHRvbXMucHVzaCgnR2VuZXJhbCBkaXNjb21mb3J0JywgJ01lZGljYWwgYXR0ZW50aW9uIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzeW1wdG9tcyxcclxuICAgICAgICAgICAgc2V2ZXJpdHksXHJcbiAgICAgICAgICAgIHVyZ2VuY3ksXHJcbiAgICAgICAgICAgIHJlcXVpcmVkU3BlY2lhbGl6YXRpb25zOiBBcnJheS5mcm9tKG5ldyBTZXQocmVxdWlyZWRTcGVjaWFsaXphdGlvbnMpKSxcclxuICAgICAgICAgICAgbmVlZHNCbG9vZCxcclxuICAgICAgICAgICAgZXN0aW1hdGVkQ29uZGl0aW9uOiBgUGF0aWVudCByZXF1aXJlcyAke3NldmVyaXR5LnRvTG93ZXJDYXNlKCl9IHByaW9yaXR5IG1lZGljYWwgYXR0ZW50aW9uIGZvciAke3N5bXB0b21zWzBdLnRvTG93ZXJDYXNlKCl9LmAsXHJcbiAgICAgICAgICAgIGlzTWVkaWNhbEVtZXJnZW5jeTogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2NrIG1lZGljYWwgcmVwb3J0IGZvciBmYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG1vY2tNZWRpY2FsUmVwb3J0KHBhdGllbnREYXRhOiBQYXRpZW50RGF0YSwgdml0YWxTaWduczogVml0YWxTaWducyk6IEdlbmVyYXRlZFJlcG9ydCB7XHJcbiAgICAgICAgY29uc3Qgdml0YWxTdGF0dXMgPSB0aGlzLmFzc2Vzc1ZpdGFsU2lnbnModml0YWxTaWducyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1bW1hcnk6IGBQYXRpZW50IHByZXNlbnRpbmcgd2l0aCAke3BhdGllbnREYXRhLnN5bXB0b21zLmpvaW4oJywgJyl9LiBWaXRhbCBzaWducyBzaG93ICR7dml0YWxTdGF0dXN9LiBJbW1lZGlhdGUgbWVkaWNhbCBhdHRlbnRpb24gcmVxdWlyZWQuYCxcclxuICAgICAgICAgICAgZGV0YWlsZWRBbmFseXNpczogYFRoZSBwYXRpZW50IGhhcyByZXBvcnRlZCB0aGUgZm9sbG93aW5nIHN5bXB0b21zOiAke3BhdGllbnREYXRhLnN5bXB0b21zLmpvaW4oJywgJyl9LiBCYXNlZCBvbiB0aGUgc2V2ZXJpdHkgYXNzZXNzbWVudCAoJHtwYXRpZW50RGF0YS5zZXZlcml0eX0pLCB0aGlzIGNhc2UgcmVxdWlyZXMgJHtwYXRpZW50RGF0YS51cmdlbmN5ID49IDcgPyAnaW1tZWRpYXRlJyA6ICdwcm9tcHQnfSBtZWRpY2FsIGludGVydmVudGlvbi5cXG5cXG5WaXRhbCBTaWducyBBbmFseXNpczpcXG4tIEhlYXJ0IFJhdGU6ICR7dml0YWxTaWducy5oZWFydFJhdGV9IGJwbSAoJHt0aGlzLmFzc2Vzc0hlYXJ0UmF0ZSh2aXRhbFNpZ25zLmhlYXJ0UmF0ZSl9KVxcbi0gQmxvb2QgUHJlc3N1cmU6ICR7dml0YWxTaWducy5ibG9vZFByZXNzdXJlLnN5c3RvbGljfS8ke3ZpdGFsU2lnbnMuYmxvb2RQcmVzc3VyZS5kaWFzdG9saWN9IG1tSGcgKCR7dGhpcy5hc3Nlc3NCbG9vZFByZXNzdXJlKHZpdGFsU2lnbnMuYmxvb2RQcmVzc3VyZSl9KVxcbi0gT3h5Z2VuIFNhdHVyYXRpb246ICR7dml0YWxTaWducy5veHlnZW5TYXR1cmF0aW9ufSUgKCR7dGhpcy5hc3Nlc3NPeHlnZW5TYXR1cmF0aW9uKHZpdGFsU2lnbnMub3h5Z2VuU2F0dXJhdGlvbil9KVxcbi0gVGVtcGVyYXR1cmU6ICR7dml0YWxTaWducy50ZW1wZXJhdHVyZX3CsEMgKCR7dGhpcy5hc3Nlc3NUZW1wZXJhdHVyZSh2aXRhbFNpZ25zLnRlbXBlcmF0dXJlKX0pXFxuXFxuVGhlIHBhdGllbnQgcmVxdWlyZXMgc3BlY2lhbGl6ZWQgY2FyZSBpbiAke3BhdGllbnREYXRhLnJlcXVpcmVkU3BlY2lhbGl6YXRpb24uam9pbignLCAnKX0gZGVwYXJ0bWVudHMuYCxcclxuICAgICAgICAgICAgcmVjb21tZW5kZWRBY3Rpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAnUHJlcGFyZSBlbWVyZ2VuY3kgcm9vbSBmb3IgaW1tZWRpYXRlIHBhdGllbnQgaW50YWtlJyxcclxuICAgICAgICAgICAgICAgIGBBbGVydCAke3BhdGllbnREYXRhLnJlcXVpcmVkU3BlY2lhbGl6YXRpb25bMF19IHNwZWNpYWxpc3Qgb24gZHV0eWAsXHJcbiAgICAgICAgICAgICAgICAnUHJlcGFyZSBuZWNlc3NhcnkgZGlhZ25vc3RpYyBlcXVpcG1lbnQnLFxyXG4gICAgICAgICAgICAgICAgdml0YWxTdGF0dXMuaW5jbHVkZXMoJ2Fibm9ybWFsJykgPyAnU3RhbmRieSBmb3IgcG90ZW50aWFsIHN0YWJpbGl6YXRpb24gcHJvY2VkdXJlcycgOiAnTW9uaXRvciB2aXRhbCBzaWducyB1cG9uIGFycml2YWwnLFxyXG4gICAgICAgICAgICAgICAgcGF0aWVudERhdGEuYmxvb2RUeXBlTmVlZGVkID8gYFByZXBhcmUgYmxvb2QgYmFuayBmb3IgcG90ZW50aWFsICR7cGF0aWVudERhdGEuYmxvb2RUeXBlTmVlZGVkfSBibG9vZCB0cmFuc2Z1c2lvbmAgOiAnU3RhbmRhcmQgZW1lcmdlbmN5IHByb3RvY29scydcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgdXJnZW5jeUxldmVsOiBwYXRpZW50RGF0YS5zZXZlcml0eSxcclxuICAgICAgICAgICAgc3BlY2lhbGlzdFJlcXVpcmVkOiBwYXRpZW50RGF0YS5yZXF1aXJlZFNwZWNpYWxpemF0aW9uXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzc2Vzc1ZpdGFsU2lnbnModml0YWxzOiBWaXRhbFNpZ25zKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgIGlmICh2aXRhbHMuaGVhcnRSYXRlIDwgNjAgfHwgdml0YWxzLmhlYXJ0UmF0ZSA+IDEwMCkgaXNzdWVzLnB1c2goJ2Fibm9ybWFsIGhlYXJ0IHJhdGUnKTtcclxuICAgICAgICBpZiAodml0YWxzLmJsb29kUHJlc3N1cmUuc3lzdG9saWMgPiAxNDAgfHwgdml0YWxzLmJsb29kUHJlc3N1cmUuZGlhc3RvbGljID4gOTApIGlzc3Vlcy5wdXNoKCdlbGV2YXRlZCBibG9vZCBwcmVzc3VyZScpO1xyXG4gICAgICAgIGlmICh2aXRhbHMub3h5Z2VuU2F0dXJhdGlvbiA8IDk1KSBpc3N1ZXMucHVzaCgnbG93IG94eWdlbiBzYXR1cmF0aW9uJyk7XHJcbiAgICAgICAgaWYgKHZpdGFscy50ZW1wZXJhdHVyZSA+IDM3LjUgfHwgdml0YWxzLnRlbXBlcmF0dXJlIDwgMzYpIGlzc3Vlcy5wdXNoKCdhYm5vcm1hbCB0ZW1wZXJhdHVyZScpO1xyXG5cclxuICAgICAgICByZXR1cm4gaXNzdWVzLmxlbmd0aCA+IDAgPyBpc3N1ZXMuam9pbignLCAnKSA6ICdzdGFibGUgdml0YWwgc2lnbnMnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXNzZXNzSGVhcnRSYXRlKGhyOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChociA8IDYwKSByZXR1cm4gJ0JyYWR5Y2FyZGlhJztcclxuICAgICAgICBpZiAoaHIgPiAxMDApIHJldHVybiAnVGFjaHljYXJkaWEnO1xyXG4gICAgICAgIHJldHVybiAnTm9ybWFsJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzc2Vzc0Jsb29kUHJlc3N1cmUoYnA6IHsgc3lzdG9saWM6IG51bWJlcjsgZGlhc3RvbGljOiBudW1iZXIgfSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGJwLnN5c3RvbGljID4gMTQwIHx8IGJwLmRpYXN0b2xpYyA+IDkwKSByZXR1cm4gJ0h5cGVydGVuc2l2ZSc7XHJcbiAgICAgICAgaWYgKGJwLnN5c3RvbGljIDwgOTAgfHwgYnAuZGlhc3RvbGljIDwgNjApIHJldHVybiAnSHlwb3RlbnNpdmUnO1xyXG4gICAgICAgIHJldHVybiAnTm9ybWFsJztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzc2Vzc094eWdlblNhdHVyYXRpb24oc3BvMjogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoc3BvMiA8IDkwKSByZXR1cm4gJ0NyaXRpY2FsJztcclxuICAgICAgICBpZiAoc3BvMiA8IDk1KSByZXR1cm4gJ0xvdyc7XHJcbiAgICAgICAgcmV0dXJuICdOb3JtYWwnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXNzZXNzVGVtcGVyYXR1cmUodGVtcDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGVtcCA+IDM4KSByZXR1cm4gJ0ZldmVyJztcclxuICAgICAgICBpZiAodGVtcCA8IDM2KSByZXR1cm4gJ0h5cG90aGVybWlhJztcclxuICAgICAgICByZXR1cm4gJ05vcm1hbCc7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxyXG5leHBvcnQgY29uc3QgZ2VtaW5pU2VydmljZSA9IG5ldyBHZW1pbmlTZXJ2aWNlKCk7XHJcbiJdLCJuYW1lcyI6WyJHb29nbGVHZW5lcmF0aXZlQUkiLCJnZW5BSSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19HRU1JTklfQVBJX0tFWSIsIkdlbWluaVNlcnZpY2UiLCJhbmFseXplU3ltcHRvbXMiLCJ0cmFuc2NyaXB0IiwicHJvbXB0IiwicmVzdWx0IiwibW9kZWwiLCJnZW5lcmF0ZUNvbnRlbnQiLCJyZXNwb25zZSIsInRleHQiLCJqc29uTWF0Y2giLCJtYXRjaCIsIkVycm9yIiwiYW5hbHlzaXMiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJtb2NrU3ltcHRvbUFuYWx5c2lzIiwiZ2VuZXJhdGVNZWRpY2FsUmVwb3J0IiwicGF0aWVudERhdGEiLCJ2aXRhbFNpZ25zIiwic3ltcHRvbXMiLCJqb2luIiwic2V2ZXJpdHkiLCJ1cmdlbmN5IiwiYWdlIiwiZ2VuZGVyIiwiYWxsZXJnaWVzIiwiY3VycmVudE1lZGljYXRpb25zIiwiaGVhcnRSYXRlIiwiYmxvb2RQcmVzc3VyZSIsInN5c3RvbGljIiwiZGlhc3RvbGljIiwib3h5Z2VuU2F0dXJhdGlvbiIsInRlbXBlcmF0dXJlIiwicmVzcGlyYXRvcnlSYXRlIiwiZ2x1Y29zZUxldmVsIiwicmVwb3J0IiwibW9ja01lZGljYWxSZXBvcnQiLCJsb3dlclRyYW5zY3JpcHQiLCJ0b0xvd2VyQ2FzZSIsInJlcXVpcmVkU3BlY2lhbGl6YXRpb25zIiwibmVlZHNCbG9vZCIsIm1lZGljYWxLZXl3b3JkcyIsImlzTWVkaWNhbCIsInNvbWUiLCJrZXl3b3JkIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJpc01lZGljYWxFbWVyZ2VuY3kiLCJ2YWxpZGF0aW9uRXJyb3IiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwiZXN0aW1hdGVkQ29uZGl0aW9uIiwidml0YWxTdGF0dXMiLCJhc3Nlc3NWaXRhbFNpZ25zIiwic3VtbWFyeSIsImRldGFpbGVkQW5hbHlzaXMiLCJhc3Nlc3NIZWFydFJhdGUiLCJhc3Nlc3NCbG9vZFByZXNzdXJlIiwiYXNzZXNzT3h5Z2VuU2F0dXJhdGlvbiIsImFzc2Vzc1RlbXBlcmF0dXJlIiwicmVxdWlyZWRTcGVjaWFsaXphdGlvbiIsInJlY29tbWVuZGVkQWN0aW9ucyIsImJsb29kVHlwZU5lZWRlZCIsInVyZ2VuY3lMZXZlbCIsInNwZWNpYWxpc3RSZXF1aXJlZCIsInZpdGFscyIsImlzc3VlcyIsImhyIiwiYnAiLCJzcG8yIiwidGVtcCIsImdldEdlbmVyYXRpdmVNb2RlbCIsImdlbWluaVNlcnZpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/geminiService.ts\n"));

/***/ })

});